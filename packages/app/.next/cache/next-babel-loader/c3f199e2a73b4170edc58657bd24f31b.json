{"ast":null,"code":"var _jsxFileName = \"/home/hasparus/workspace/zagrajmy/frontend/packages/app/src/app/store/index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { createContext, useContext, useRef } from \"react\";\nimport { jsx } from \"theme-ui\";\nexport const initialState = {\n  user: null\n};\nconst ctx = createContext(initialState);\nexport const useAppState = () => useContext(ctx);\nconst {\n  Provider\n} = ctx;\nexport const AppStateProvider = ({\n  children,\n  stateFromInitialProps\n}) => {\n  const cached = useRef(initialState);\n\n  if (stateFromInitialProps.user) {\n    cached.current.user = stateFromInitialProps.user;\n  }\n\n  return jsx(Provider, {\n    value: cached.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 10\n    }\n  }, children);\n};","map":{"version":3,"sources":["/home/hasparus/workspace/zagrajmy/frontend/packages/app/src/app/store/index.tsx"],"names":["createContext","useContext","useRef","initialState","user","ctx","useAppState","Provider","AppStateProvider","children","stateFromInitialProps","cached","current"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,MAApC,QAAkD,OAAlD;;AAOA,OAAO,MAAMC,YAA8B,GAAG;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAvC;AAEP,MAAMC,GAAG,GAAGL,aAAa,CAACG,YAAD,CAAzB;AAEA,OAAO,MAAMG,WAAW,GAAG,MAAML,UAAU,CAACI,GAAD,CAApC;AAQP,MAAM;AAAEE,EAAAA;AAAF,IAAeF,GAArB;AAEA,OAAO,MAAMG,gBAAiD,GAAG,CAAC;AAChEC,EAAAA,QADgE;AAEhEC,EAAAA;AAFgE,CAAD,KAG3D;AACJ,QAAMC,MAAM,GAAGT,MAAM,CAAmBC,YAAnB,CAArB;;AAEA,MAAIO,qBAAqB,CAACN,IAA1B,EAAgC;AAC9BO,IAAAA,MAAM,CAACC,OAAP,CAAeR,IAAf,GAAsBM,qBAAqB,CAACN,IAA5C;AACD;;AAED,SAAO,IAAC,QAAD;AAAU,IAAA,KAAK,EAAEO,MAAM,CAACC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCH,QAAlC,CAAP;AACD,CAXM","sourcesContent":["import { createContext, useContext, useRef } from \"react\";\nimport { Claims } from \"../auth\";\n\nexport type ApplicationState = {\n  user?: Claims | null | undefined;\n};\n\nexport const initialState: ApplicationState = { user: null };\n\nconst ctx = createContext(initialState);\n\nexport const useAppState = () => useContext(ctx);\n\nexport type StateFromAppInitialProps = Partial<Pick<ApplicationState, \"user\">>;\n\ninterface AppStateProviderProps {\n  stateFromInitialProps: StateFromAppInitialProps;\n}\n\nconst { Provider } = ctx;\n\nexport const AppStateProvider: React.FC<AppStateProviderProps> = ({\n  children,\n  stateFromInitialProps,\n}) => {\n  const cached = useRef<ApplicationState>(initialState);\n\n  if (stateFromInitialProps.user) {\n    cached.current.user = stateFromInitialProps.user;\n  }\n\n  return <Provider value={cached.current}>{children}</Provider>;\n};\n"]},"metadata":{},"sourceType":"module"}