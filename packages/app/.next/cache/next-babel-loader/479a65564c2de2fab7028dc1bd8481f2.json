{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/hasparus/workspace/zagrajmy/frontend/packages/app/src/app/store/index.tsx\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { createContext, useContext, useRef } from \"react\";\nimport { jsx } from \"theme-ui\";\nexport var initialState = {\n  user: null\n};\nvar ctx = createContext(initialState);\nexport var useAppState = function useAppState() {\n  return useContext(ctx);\n};\nvar Provider = ctx.Provider;\nexport var AppStateProvider = function AppStateProvider(_ref) {\n  var children = _ref.children,\n      stateFromInitialProps = _ref.stateFromInitialProps;\n  var cached = useRef(initialState);\n\n  if (stateFromInitialProps.user) {\n    cached.current.user = stateFromInitialProps.user;\n  }\n\n  return jsx(Provider, {\n    value: cached.current,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 10\n    }\n  }, children);\n};","map":{"version":3,"sources":["/home/hasparus/workspace/zagrajmy/frontend/packages/app/src/app/store/index.tsx"],"names":["createContext","useContext","useRef","initialState","user","ctx","useAppState","Provider","AppStateProvider","children","stateFromInitialProps","cached","current"],"mappings":";;;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,MAApC,QAAkD,OAAlD;;AAOA,OAAO,IAAMC,YAA8B,GAAG;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAvC;AAEP,IAAMC,GAAG,GAAGL,aAAa,CAACG,YAAD,CAAzB;AAEA,OAAO,IAAMG,WAAW,GAAG,SAAdA,WAAc;AAAA,SAAML,UAAU,CAACI,GAAD,CAAhB;AAAA,CAApB;IAQCE,Q,GAAaF,G,CAAbE,Q;AAER,OAAO,IAAMC,gBAAiD,GAAG,SAApDA,gBAAoD,OAG3D;AAAA,MAFJC,QAEI,QAFJA,QAEI;AAAA,MADJC,qBACI,QADJA,qBACI;AACJ,MAAMC,MAAM,GAAGT,MAAM,CAAmBC,YAAnB,CAArB;;AAEA,MAAIO,qBAAqB,CAACN,IAA1B,EAAgC;AAC9BO,IAAAA,MAAM,CAACC,OAAP,CAAeR,IAAf,GAAsBM,qBAAqB,CAACN,IAA5C;AACD;;AAED,SAAO,IAAC,QAAD;AAAU,IAAA,KAAK,EAAEO,MAAM,CAACC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCH,QAAlC,CAAP;AACD,CAXM","sourcesContent":["import { createContext, useContext, useRef } from \"react\";\nimport { Claims } from \"../auth\";\n\nexport type ApplicationState = {\n  user?: Claims | null | undefined;\n};\n\nexport const initialState: ApplicationState = { user: null };\n\nconst ctx = createContext(initialState);\n\nexport const useAppState = () => useContext(ctx);\n\nexport type StateFromAppInitialProps = Partial<Pick<ApplicationState, \"user\">>;\n\ninterface AppStateProviderProps {\n  stateFromInitialProps: StateFromAppInitialProps;\n}\n\nconst { Provider } = ctx;\n\nexport const AppStateProvider: React.FC<AppStateProviderProps> = ({\n  children,\n  stateFromInitialProps,\n}) => {\n  const cached = useRef<ApplicationState>(initialState);\n\n  if (stateFromInitialProps.user) {\n    cached.current.user = stateFromInitialProps.user;\n  }\n\n  return <Provider value={cached.current}>{children}</Provider>;\n};\n"]},"metadata":{},"sourceType":"module"}